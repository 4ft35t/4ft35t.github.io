<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>6300v2 on 4ft35t blog</title><link>https://4ft35t.github.io/tags/6300v2/</link><description>Recent content in 6300v2 on 4ft35t blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 04 Dec 2022 17:57:03 +0800</lastBuildDate><atom:link href="https://4ft35t.github.io/tags/6300v2/index.xml" rel="self" type="application/rss+xml"/><item><title>低成本 mesh 组网</title><link>https://4ft35t.github.io/post/lowcast-mesh/</link><pubDate>Sun, 04 Dec 2022 17:57:03 +0800</pubDate><guid>https://4ft35t.github.io/post/lowcast-mesh/</guid><description>&lt;img src="https://cdn.unwire.hk/wp-content/uploads/2018/03/999-1.png" alt="Featured image of post 低成本 mesh 组网" /&gt;&lt;p&gt;上一次主动看 mesh 路由，单台成本 2000 左右，最近在什么值得买上看到用网件 6300V2 刷机后组 mesh 的，原理是网件6300V2 和华硕 AC68U 使用相同的硬件，修改 CEF 中相关配置，即可伪装成华硕 AC68U，使用华硕固件和功能。&lt;/p&gt;
&lt;p&gt;6300V2 二手价格单台不到80，立马买两台来组网。&lt;/p&gt;
&lt;h2 id="硬件成本"&gt;硬件成本
&lt;/h2&gt;&lt;p&gt;自有一台服役多年的 6300V2，淘宝新买2台二手，75.99 一台包邮。&lt;/p&gt;
&lt;p&gt;不想折腾的可以买刷好梅林386版本的机器，跳过刷机部分，直达 mesh 组网部分。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;75.99 包邮，原厂固件 &lt;a class="link" href="https://item.taobao.com/item.htm?id=654468086454" target="_blank" rel="noopener"
&gt;https://item.taobao.com/item.htm?id=654468086454&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;138 包邮，梅林386固件 &lt;a class="link" href="https://item.taobao.com/item.htm?id=690054031769" target="_blank" rel="noopener"
&gt;https://item.taobao.com/item.htm?id=690054031769&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="刷机"&gt;刷机
&lt;/h2&gt;&lt;p&gt;电脑和路由器用网线连接，推荐使用路由器的 LAN1-LAN3，不要用 LAN4，具体原因下文会提到。&lt;/p&gt;
&lt;h3 id="1-从官方固件刷梅林"&gt;1. 从官方固件刷梅林
&lt;/h3&gt;&lt;p&gt;下载 380 版本梅林固件，https://fw.koolcenter.com/KoolCenter_Merlin_Legacy_380/Netgear/R6300V2/X7.9.1/R6300V2_380.70_0-X7.9.1-koolshare.chk&lt;/p&gt;
&lt;p&gt;路由器恢复出厂设置:&lt;/p&gt;
&lt;p&gt;路由器关机，按住reset开机，15秒后松开&lt;/p&gt;
&lt;p&gt;浏览器打开 192.168.1.1，admin/password 登录，固件升级选择 R6300V2_380.70_0-X7.9.1-koolshare.chk&lt;/p&gt;
&lt;h3 id="2-备份-cfe-和-board_data"&gt;2. 备份 CFE 和 board_data
&lt;/h3&gt;&lt;p&gt;刷梅林 380 版本后，路由器地址变成 192.168.50.1。登录路由器，帐号密码沿用 admin/password，打开 SSH 服务&lt;/p&gt;
&lt;p&gt;系统管理 - 系统设置 - 启用 SSH- LAN only - 应用本页面设置&lt;/p&gt;
&lt;p&gt;使用 ssh 登录路由器，Windows 可以用 putty 或者 wsl。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dd &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/mtd0 &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/tmp/backup_cfe.bin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dd &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/mtd4 &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/tmp/backup_board_data.bin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;使用 scp 把 上面两个文件拖回本地，如果需要就砖会用到。&lt;/p&gt;
&lt;p&gt;如果遇到 &lt;code&gt;/usr/libexec/sftp-server: not found&lt;/code&gt; 错误，是因为本地的 scp 版本太新，加 &lt;code&gt;-O&lt;/code&gt; 参数即可&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;scp -O admin@192.168.50.1:/tmp/backup_cfe.bin .
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="3-刷-cfe"&gt;3. 刷 CFE
&lt;/h3&gt;&lt;p&gt;下载 CEF &lt;a class="link" href="https://fw.koolcenter.com/KoolCenter_Merlin_New_Gen_384/NETGEAR/R6300v2/tools/cfe_2.4Gfix.bin" target="_blank" rel="noopener"
&gt;https://fw.koolcenter.com/KoolCenter_Merlin_New_Gen_384/NETGEAR/R6300v2/tools/cfe_2.4Gfix.bin&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下载 CEF 修改器 &lt;a class="link" href="https://fw.koolcenter.com/KoolCenter_Merlin_New_Gen_384/NETGEAR/R6300v2/tools/CFEEdit.exe" target="_blank" rel="noopener"
&gt;https://fw.koolcenter.com/KoolCenter_Merlin_New_Gen_384/NETGEAR/R6300v2/tools/CFEEdit.exe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;打开 CFEEdit.exe，把 MAC 地址修改成华硕的地址段&lt;/p&gt;
&lt;p&gt;需要修改五个位置&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;et0macaddr=00:90:4C:0F:F1:A7
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;0:macaddr=00:90:4C:0F:F1:A7
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;1:macaddr=00:90:4C:0F:F1:AB
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;secret_code=73210917
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;odmpid=RT-AC68U
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;另存为 cfe-1.bin&lt;/p&gt;
&lt;p&gt;继续修改，把上面内容 MAC 地址中倒数第二段的 &lt;code&gt;F1&lt;/code&gt; 分别修改成 &lt;code&gt;F2&lt;/code&gt; 和 &lt;code&gt;F3&lt;/code&gt;，同时 &lt;code&gt;secret_code&lt;/code&gt; 最后的 &lt;code&gt;17&lt;/code&gt; 改成 &lt;code&gt;27&lt;/code&gt; 和 &lt;code&gt;37&lt;/code&gt;，另存为 cfe-2.bin 和 cfe-3.bin，分别对应三台机器。&lt;/p&gt;
&lt;p&gt;scp 把 CFE 传送到路由器&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;scp -O cfe-1.bin admin@192.168.50.1:/tmp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ssh 登陆路由器，开始刷 CFE&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dd if=/tmp/cfe-1.bin of=/dev/mtd0
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;nvram erase
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;reboot
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;重启后路由器会进入 tftp 刷机状态，ip 为 192.168.1.1&lt;/p&gt;
&lt;h3 id="4-tftp-刷入梅林-386-版本"&gt;4. tftp 刷入梅林 386 版本
&lt;/h3&gt;&lt;p&gt;下载 386 版本固件 &lt;a class="link" href="https://fw.koolcenter.com/KoolCenter_Merlin_New_Gen_386/Netgear/R6300v2/RT-AC6300v2_386.2_4-20210628-91625500b.trx" target="_blank" rel="noopener"
&gt;https://fw.koolcenter.com/KoolCenter_Merlin_New_Gen_386/Netgear/R6300v2/RT-AC6300v2_386.2_4-20210628-91625500b.trx&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Windows 电脑安装自带的 tftp 客户端&lt;/p&gt;
&lt;p&gt;Win+r - 输入 appwiz.cpl - 打开或关闭Windows功能 - 勾选TFTP客户端 - 重启&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;手动设置电到有线网卡的 IP，此时的路由器没有 DHCP 功能。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;IP 192.168.1.2, 子网掩码会自动生成，网关不用填。&lt;/p&gt;
&lt;p&gt;打开一个 cmd 窗口，执行 &lt;code&gt;ping -t 192.168.1.1&lt;/code&gt; 观察 TTL，TTL 值为 100 即表示路由器处于 tftp 刷机状态，如果不是 100，重启路由器。&lt;/p&gt;
&lt;p&gt;打开第二个 cmd 窗口，执行 &lt;code&gt;tftp -i 192.168.1.1 put RT-AC6300v2_386.2_4-20210628-91625500b.trx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;等 tftp 传输完成后，路由器会在3分钟内重启多次，最后完成刷机。&lt;/p&gt;
&lt;p&gt;当 ping 的 TTL 变成 64，即表示路由器正常启动。如果 tftp 传输完成后5分钟，TTL 还没变成 64，重启路由器。&lt;/p&gt;
&lt;p&gt;如果重启后 ping TTL 值一直保持 100，浏览器访问 192.168.1.1，进入 CFE miniWeb，点击 &amp;ldquo;Restore default NVRAM values&amp;rdquo;，然后重启。&lt;/p&gt;
&lt;h3 id="4-刷机后存在问题"&gt;4. 刷机后存在问题
&lt;/h3&gt;&lt;p&gt;刷机后，WAN 口的位置会发生变化&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;刷机前
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+------+------+------+------+ +------+
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;| LAN4 |LAN3 | LAN2 | LAN1 | | WAN |
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;| | | | | | |
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+------+------+------+------+ +------+
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;刷机后
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+------+------+------+------+ +------+
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;| WAN |LAN1 |LAN2 |LAN3 | |LAN4 |
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;| | | | | | |
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+------+------+------+------+ +------+
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="mesh-组网"&gt;mesh 组网
&lt;/h2&gt;&lt;p&gt;路由1 做为 mesh 路由，访问 192.168.1.1，按向导完成 pppoe 拨号设置，选路由器模式。&lt;/p&gt;
&lt;p&gt;路由器2，作为 AiMesh 节点，按向导完成动态动态 IP 设置；然后&lt;/p&gt;
&lt;p&gt;系统管理 - 操作模式 - AiMesh 节点 - 保存&lt;/p&gt;
&lt;p&gt;等界面显示重置完成，路由器2的设置完成。&lt;/p&gt;
&lt;p&gt;现在电脑网线连接路由器1；路由器2保持开机，不插网线，放在路由器1旁边。&lt;/p&gt;
&lt;p&gt;登录路由器1网页 - AiMesh - 添加 AiMesh 节点 - 选择路由器2（RT-AC86U） - 建立连接&lt;/p&gt;
&lt;p&gt;等待完成后对路由器3重复执行上述操作。&lt;/p&gt;
&lt;p&gt;所有操作完成后，路由器2和3的用户名密码会变成和路由器1一样。&lt;/p&gt;
&lt;p&gt;现在可以享受 mesh 组网的无缝切换了，不用再像用扩展器一样手动切换。&lt;/p&gt;
&lt;h3 id="有线回程"&gt;有线回程
&lt;/h3&gt;&lt;p&gt;路由器1 LAN 连接路由器2 WAN，即可让路由器2 变成有线回程。路由器3 同理。&lt;/p&gt;
&lt;h2 id="加散热风扇"&gt;加散热风扇
&lt;/h2&gt;&lt;p&gt;使用 3007 风扇，可以藏在机器内，用杜邦接口插在 ttl 针上，VCC 接红线，GND 接黑线。&lt;/p&gt;
&lt;h2 id="参考链接"&gt;参考链接
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://post.smzdm.com/p/a4dk3zgk/" target="_blank" rel="noopener"
&gt;最便宜的组Aimesh的方案——R6300V2最后的荣光&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.right.com.cn/forum/thread-7613019-1-1.html" target="_blank" rel="noopener"
&gt;网件NETGEAR R6300V2(国行版本) 原厂固件直刷380_X7.9.1梅林成功 附升级梅林386教程 &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://wkings.blog/archives/875" target="_blank" rel="noopener"
&gt;网件路由器 R6300v2 刷机教程和固件大全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://zhuanlan.zhihu.com/p/386867842" target="_blank" rel="noopener"
&gt;无线路由器Mesh组网教程：华硕Aimesh组网篇&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.right.com.cn/forum/forum.php?mod=redirect&amp;amp;goto=findpost&amp;amp;ptid=1686743&amp;amp;pid=5735198" target="_blank" rel="noopener"
&gt;6300v2主动散热加usb风扇问题&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>